#!/bin/dash

if [ "$(id -u)" -ne 0 ]; then
	echo "$(basename "$0"): must be root"
	exit 1
fi

mlist=/etc/pacman.d/mirrorlist

reflector \
	--country PL,DE,CZ,SK,GB,FR \
	--latest 6 \
	--sort rate \
	--protocol https \
	--save "${mlist}.tmp"

mv "${mlist}" "${mlist}.bak"
mv "${mlist}.tmp" "${mlist}"

rm -f "${mlist}.pacnew"

diff --color=auto -u "${mlist}.bak" "${mlist}"

# vim: ts=4:sw=4:noet
